<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nested Object Paths - Silcrow Example</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .card {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    h1 {
      margin-top: 0;
      color: #333;
    }
    .info {
      background: #e3f2fd;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
      font-size: 14px;
      color: #1976d2;
    }
    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 20px;
    }
    .section {
      background: #f9f9f9;
      padding: 20px;
      border-radius: 6px;
    }
    .section h3 {
      margin-top: 0;
      color: #555;
      font-size: 16px;
      border-bottom: 2px solid #ddd;
      padding-bottom: 8px;
    }
    .field {
      margin-bottom: 15px;
    }
    .field label {
      display: block;
      font-size: 13px;
      color: #666;
      margin-bottom: 5px;
      font-weight: 500;
    }
    .field input,
    .field select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    .preview {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 8px;
      font-size: 14px;
    }
    .preview h3 {
      margin-top: 0;
      color: white;
      opacity: 0.9;
    }
    .preview pre {
      background: rgba(0,0,0,0.2);
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      font-size: 12px;
      line-height: 1.6;
    }
    button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      margin-right: 10px;
      margin-bottom: 10px;
    }
    button:hover {
      background: #45a049;
    }
    button.secondary {
      background: #2196F3;
    }
    button.secondary:hover {
      background: #0b7dda;
    }
    .path-hint {
      font-family: 'Courier New', monospace;
      background: #fff3cd;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 12px;
      color: #856404;
    }
  </style>
</head>
<body s-debug>
  <div class="card">
    <h1>Nested Object Paths</h1>

    <div class="info">
      <strong>What this demonstrates:</strong> Deep object traversal using dot notation.
      Silcrow handles paths like <code>user.profile.address.city</code> automatically,
      matching your JSON structure exactly.
    </div>

    <div class="grid">
      <!-- Personal Info -->
      <div class="section">
        <h3>Personal Info <span class="path-hint">user.profile.*</span></h3>
        <div class="field">
          <label>First Name</label>
          <input type="text" s-bind="user.profile.firstName:value">
        </div>
        <div class="field">
          <label>Last Name</label>
          <input type="text" s-bind="user.profile.lastName:value">
        </div>
        <div class="field">
          <label>Email</label>
          <input type="email" s-bind="user.profile.email:value">
        </div>
      </div>

      <!-- Address -->
      <div class="section">
        <h3>Address <span class="path-hint">user.profile.address.*</span></h3>
        <div class="field">
          <label>Street</label>
          <input type="text" s-bind="user.profile.address.street:value">
        </div>
        <div class="field">
          <label>City</label>
          <input type="text" s-bind="user.profile.address.city:value">
        </div>
        <div class="field">
          <label>Country</label>
          <select s-bind="user.profile.address.country:value">
            <option value="">-- Select --</option>
            <option value="US">United States</option>
            <option value="UK">United Kingdom</option>
            <option value="CA">Canada</option>
            <option value="AU">Australia</option>
          </select>
        </div>
      </div>

      <!-- Account Settings -->
      <div class="section">
        <h3>Settings <span class="path-hint">user.settings.*</span></h3>
        <div class="field">
          <label>Theme</label>
          <select s-bind="user.settings.theme:value">
            <option value="light">Light</option>
            <option value="dark">Dark</option>
            <option value="auto">Auto</option>
          </select>
        </div>
        <div class="field">
          <label>Language</label>
          <select s-bind="user.settings.language:value">
            <option value="en">English</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
            <option value="de">German</option>
          </select>
        </div>
        <div class="field">
          <label>
            <input type="checkbox" s-bind="user.settings.notifications:checked" style="width: auto;">
            Enable Notifications
          </label>
        </div>
      </div>

      <!-- Subscription -->
      <div class="section">
        <h3>Subscription <span class="path-hint">user.subscription.*</span></h3>
        <div class="field">
          <label>Plan</label>
          <select s-bind="user.subscription.plan:value">
            <option value="free">Free</option>
            <option value="pro">Pro</option>
            <option value="enterprise">Enterprise</option>
          </select>
        </div>
        <div class="field">
          <label>Status</label>
          <input type="text" s-bind="user.subscription.status:value" readonly style="background: #f0f0f0;">
        </div>
        <div class="field">
          <label>Renewal Date</label>
          <input type="text" s-bind="user.subscription.renewalDate:value" readonly style="background: #f0f0f0;">
        </div>
      </div>
    </div>

    <div style="margin-bottom: 20px;">
      <button onclick="loadUserData()">Load Sample User</button>
      <button class="secondary" onclick="loadEnterpriseUser()">Load Enterprise User</button>
      <button onclick="clearData()">Clear</button>
    </div>

    <!-- JSON Preview -->
    <div class="preview">
      <h3>Live JSON Structure</h3>
      <pre id="jsonPreview">{}</pre>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/gh/jeetkhinde/silcrow@1.0.0/silcrow.runtime.js"></script>

  <script>
    let userData = {
      user: {
        profile: {
          firstName: '',
          lastName: '',
          email: '',
          address: {
            street: '',
            city: '',
            country: ''
          }
        },
        settings: {
          theme: 'light',
          language: 'en',
          notifications: false
        },
        subscription: {
          plan: 'free',
          status: 'active',
          renewalDate: ''
        }
      }
    };

    function render() {
      Silcrow.patch(userData, 'body');

      // Update JSON preview
      document.getElementById('jsonPreview').textContent =
        JSON.stringify(userData, null, 2);
    }

    function loadUserData() {
      userData = {
        user: {
          profile: {
            firstName: 'Sarah',
            lastName: 'Chen',
            email: 'sarah.chen@example.com',
            address: {
              street: '123 Market Street',
              city: 'San Francisco',
              country: 'US'
            }
          },
          settings: {
            theme: 'dark',
            language: 'en',
            notifications: true
          },
          subscription: {
            plan: 'pro',
            status: 'active',
            renewalDate: '2026-03-15'
          }
        }
      };
      render();
    }

    function loadEnterpriseUser() {
      userData = {
        user: {
          profile: {
            firstName: 'Marcus',
            lastName: 'Rodriguez',
            email: 'marcus@enterprise-corp.com',
            address: {
              street: '456 Enterprise Blvd',
              city: 'London',
              country: 'UK'
            }
          },
          settings: {
            theme: 'auto',
            language: 'en',
            notifications: true
          },
          subscription: {
            plan: 'enterprise',
            status: 'active',
            renewalDate: '2027-01-01'
          }
        }
      };
      render();
    }

    function clearData() {
      userData = {
        user: {
          profile: {
            firstName: '',
            lastName: '',
            email: '',
            address: {
              street: '',
              city: '',
              country: ''
            }
          },
          settings: {
            theme: 'light',
            language: 'en',
            notifications: false
          },
          subscription: {
            plan: 'free',
            status: 'active',
            renewalDate: ''
          }
        }
      };
      render();
    }

    // Listen to form changes
    document.addEventListener('input', () => {
      render();
    });

    document.addEventListener('change', () => {
      render();
    });

    // Initial render
    render();
  </script>
</body>
</html>
