<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Property Binding - Silcrow Example</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      max-width: 700px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .card {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    h1 {
      margin-top: 0;
      color: #333;
    }
    h3 {
      color: #555;
      border-bottom: 2px solid #eee;
      padding-bottom: 10px;
    }
    .info {
      background: #e3f2fd;
      padding: 15px;
      border-radius: 4px;
      margin-bottom: 20px;
      font-size: 14px;
      color: #1976d2;
    }
    .section {
      margin-bottom: 30px;
    }
    .form-group {
      margin-bottom: 15px;
      padding: 15px;
      background: #f9f9f9;
      border-radius: 4px;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #555;
    }
    input[type="text"],
    input[type="url"],
    input[type="number"],
    input[type="range"],
    select {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      font-size: 14px;
      box-sizing: border-box;
    }
    input[type="checkbox"],
    input[type="radio"] {
      width: 18px;
      height: 18px;
      cursor: pointer;
      margin-right: 8px;
    }
    .checkbox-group,
    .radio-group {
      display: flex;
      align-items: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    .checkbox-item,
    .radio-item {
      display: flex;
      align-items: center;
    }
    button {
      background: #4CAF50;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: 500;
      margin-right: 10px;
    }
    button:hover {
      background: #45a049;
    }
    .preview {
      background: #fffbf0;
      padding: 20px;
      border-radius: 4px;
      border-left: 4px solid #ff9800;
    }
    .preview-item {
      margin: 8px 0;
      font-size: 14px;
      color: #666;
    }
    img.preview-img {
      max-width: 200px;
      border-radius: 4px;
      margin-top: 10px;
      border: 2px solid #ddd;
    }
    .disabled-demo button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .range-value {
      font-weight: bold;
      color: #2196F3;
    }
  </style>
</head>
<body s-debug>
  <div class="card">
    <h1>Property Binding Examples</h1>

    <div class="info">
      <strong>What this demonstrates:</strong> Binding to DOM properties (checked, disabled, selected, src, href, value, selectedIndex)
      using the <code>s-bind="path:property"</code> syntax.
    </div>

    <!-- Checkboxes -->
    <div class="section">
      <h3>Checkboxes (checked property)</h3>
      <div class="checkbox-group">
        <div class="checkbox-item">
          <input type="checkbox" id="newsletter" s-bind="settings.newsletter:checked">
          <label for="newsletter" style="margin: 0;">Subscribe to newsletter</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="notifications" s-bind="settings.notifications:checked">
          <label for="notifications" style="margin: 0;">Enable notifications</label>
        </div>
        <div class="checkbox-item">
          <input type="checkbox" id="darkMode" s-bind="settings.darkMode:checked">
          <label for="darkMode" style="margin: 0;">Dark mode</label>
        </div>
      </div>
    </div>

    <!-- Select Dropdown -->
    <div class="section">
      <h3>Select (value property)</h3>
      <div class="form-group">
        <label>Choose your country</label>
        <select s-bind="profile.country:value">
          <option value="">-- Select --</option>
          <option value="us">United States</option>
          <option value="uk">United Kingdom</option>
          <option value="ca">Canada</option>
          <option value="au">Australia</option>
          <option value="de">Germany</option>
        </select>
      </div>
    </div>

    <!-- Disabled Property -->
    <div class="section">
      <h3>Disabled Property</h3>
      <div class="form-group disabled-demo">
        <label>
          <input type="checkbox" id="agreeTerms" s-bind="form.agreedToTerms:checked">
          I agree to the terms and conditions
        </label>
        <button s-bind="form.submitDisabled:disabled">Submit Form</button>
        <p style="font-size: 13px; color: #999; margin-top: 10px;">
          Button is disabled until checkbox is checked
        </p>
      </div>
    </div>

    <!-- Image Source -->
    <div class="section">
      <h3>Image Source (src property)</h3>
      <div class="form-group">
        <label>Avatar URL</label>
        <input
          type="url"
          s-bind="profile.avatar:value"
          placeholder="https://example.com/avatar.jpg">
        <img
          class="preview-img"
          s-bind="profile.avatar:src"
          alt="Avatar preview"
          onerror="this.src='data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 width=%22200%22 height=%22200%22%3E%3Crect fill=%22%23ddd%22 width=%22200%22 height=%22200%22/%3E%3Ctext fill=%22%23999%22 x=%2250%25%22 y=%2250%25%22 text-anchor=%22middle%22 dy=%22.3em%22%3ENo image%3C/text%3E%3C/svg%3E'">
      </div>
    </div>

    <!-- Link Href -->
    <div class="section">
      <h3>Link Href (href property)</h3>
      <div class="form-group">
        <label>Website URL</label>
        <input
          type="url"
          s-bind="profile.website:value"
          placeholder="https://example.com">
        <p style="margin-top: 10px;">
          <a s-bind="profile.website:href" target="_blank" style="color: #2196F3;">
            Visit Website â†’
          </a>
        </p>
      </div>
    </div>

    <!-- Range Input -->
    <div class="section">
      <h3>Range Input (value property)</h3>
      <div class="form-group">
        <label>Volume: <span class="range-value" s-bind="settings.volume"></span>%</label>
        <input
          type="range"
          min="0"
          max="100"
          s-bind="settings.volume:value">
      </div>
    </div>

    <!-- Preview -->
    <div class="preview">
      <h3 style="margin-top: 0; color: #ff9800;">Live Data Preview</h3>
      <div class="preview-item"><strong>Newsletter:</strong> <span s-bind="settings.newsletter"></span></div>
      <div class="preview-item"><strong>Notifications:</strong> <span s-bind="settings.notifications"></span></div>
      <div class="preview-item"><strong>Dark Mode:</strong> <span s-bind="settings.darkMode"></span></div>
      <div class="preview-item"><strong>Country:</strong> <span s-bind="profile.country"></span></div>
      <div class="preview-item"><strong>Agreed to Terms:</strong> <span s-bind="form.agreedToTerms"></span></div>
      <div class="preview-item"><strong>Avatar URL:</strong> <span s-bind="profile.avatar"></span></div>
      <div class="preview-item"><strong>Website:</strong> <span s-bind="profile.website"></span></div>
      <div class="preview-item"><strong>Volume:</strong> <span s-bind="settings.volume"></span>%</div>
    </div>

    <div style="margin-top: 20px;">
      <button onclick="loadDefaults()">Load Defaults</button>
      <button onclick="clearAll()">Clear All</button>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/gh/jeetkhinde/silcrow@1.0.0/silcrow.runtime.js"></script>

  <script>
    let state = {
      settings: {
        newsletter: false,
        notifications: false,
        darkMode: false,
        volume: 50
      },
      profile: {
        country: '',
        avatar: '',
        website: ''
      },
      form: {
        agreedToTerms: false,
        submitDisabled: true
      }
    };

    function render() {
      // Update submit button disabled state (inverse of checkbox)
      state.form.submitDisabled = !state.form.agreedToTerms;
      Silcrow.patch(state, 'body');
    }

    function loadDefaults() {
      state = {
        settings: {
          newsletter: true,
          notifications: true,
          darkMode: false,
          volume: 75
        },
        profile: {
          country: 'us',
          avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=Felix',
          website: 'https://github.com/jeetkhinde/silcrow'
        },
        form: {
          agreedToTerms: true,
          submitDisabled: false
        }
      };
      render();
    }

    function clearAll() {
      state = {
        settings: {
          newsletter: false,
          notifications: false,
          darkMode: false,
          volume: 50
        },
        profile: {
          country: '',
          avatar: '',
          website: ''
        },
        form: {
          agreedToTerms: false,
          submitDisabled: true
        }
      };
      render();
    }

    // Listen to all changes and update state
    document.addEventListener('change', (e) => {
      // Get updated form values
      state.settings.newsletter = document.getElementById('newsletter').checked;
      state.settings.notifications = document.getElementById('notifications').checked;
      state.settings.darkMode = document.getElementById('darkMode').checked;
      state.form.agreedToTerms = document.getElementById('agreeTerms').checked;

      render();
    });

    document.addEventListener('input', (e) => {
      render();
    });

    // Initial render
    render();
  </script>
</body>
</html>
